var Gradiator=function(){var a,b=this,c=[],d=[],e=window.getComputedStyle(document.documentElement,""),f=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],g=".sr-only { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0px; overflow: hidden; clip: rect(0px 0px 0px 0px); border: 0px; display: block; }",h=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=g:i.appendChild(document.createTextNode(g)),h.appendChild(i),this.addResizeHandler=function(){window.attachEvent?window.attachEvent("onresize",function(){b.resizeGrad()}):window.addEventListener&&window.addEventListener("resize",function(){b.resizeGrad()},!0)},this.resizeGrad=function(){clearTimeout(a),a=setTimeout(function(){for(;c.length>0;){var a=c.shift();a.canvas.parentNode.removeChild(a.canvas),a.elem.style.display=a.display}for(var e=0;e<d.length;e++)b.gradiate(d[e].selector,d[e].topColor,d[e].botColor,d[e].attemptCSS,!1)},250)},this.gradiate=function(a,b,e,g,h){h="undefined"!=typeof h?h:!0,g="undefined"!=typeof g?g:!0;var i=document.createElement("canvas");if(i.getContext&&i.getContext("2d")){h&&d.push({selector:a,topColor:b,botColor:e,attemptCSS:g});var j=[],k=a.substring(0,1);if(a=a.substr(1),"."===k)j=document.getElementsByClassName(a);else{if("#"!==k)return;j.push(document.getElementById(a))}for(var l=0;l<j.length;l++){var m=j[l];if(m.className=m.className.replace(/\bsr-only\b/,""),"webkit"===f&&g)m.style.background="-webkit-linear-gradient("+b+", "+e+")",m.style.webkitBackgroundClip="text",m.style.webkitTextFillColor="transparent";else{var n=m.parentNode,o=window.getComputedStyle(m,null),p=document.createElement("canvas"),q=p.getContext("2d"),r=window.devicePixelRatio||1,s=q.webkitBackingStorePixelRatio||q.mozBackingStorePixelRatio||q.msBackingStorePixelRatio||q.oBackingStorePixelRatio||q.backingStorePixelRatio||1,t=r/s,u=m.offsetWidth,v=m.offsetHeight,w=parseInt(o.fontSize,10),x=v-w-parseInt(o.paddingTop,10)-parseInt(o.paddingBottom,10),y=parseInt(o.paddingLeft,10),z=parseInt(o.paddingRight,10)+parseInt(o.width,10),A=parseInt(o.paddingTop,10)+x,B=parseInt(o.fontSize,10)+A,C=q.createLinearGradient(y,A,y,B),D=0,E=0,F=0,G="transparent";if("none"!==o.getPropertyValue("text-shadow")){var H=o.textShadow.split(") ");if(H.length>1){G=H.shift()+")";var I=H.shift().split(" ");D=parseInt(I[0],10)*t,E=parseInt(I[1],10)*t,F=parseInt(I[2],10)*t}}v+=2*E+2*F,gradCanvasObj={canvas:p,elem:m,display:o.getPropertyValue("display")},c.push(gradCanvasObj),"center"===o.textAlign?y=u/2:"right"===o.textAlign&&(y=z),m.id&&(p.id="gradiated-"+m.id),p.style.background=o.background,o.background||(p.style.backgroundColor=o.getPropertyValue("background-color"),p.style.backgroundImage=o.getPropertyValue("background-image")),p.style.position=o.getPropertyValue("position"),p.style.position="relative",p.style.display=o.getPropertyValue("display"),p.style.marginTop=o.getPropertyValue("margin-top"),p.style.marginBottom=o.getPropertyValue("margin-bottom"),p.style.marginRight=o.getPropertyValue("margin-right"),p.style.marginLeft=o.getPropertyValue("margin-left"),p.style["float"]=o.getPropertyValue("float"),n.insertBefore(p,m),p.width=u*t,p.height=v*t,p.style.width=u+"px",p.style.height=v+"px",q.scale(t,t),q.font=o.fontStyle+" "+o.fontVariant+" "+o.fontWeight+" "+o.fontSize+" "+o.fontFamily,q.textBaseline="bottom",q.textBaseline="middle",q.textAlign=o.textAlign;for(var J=m.textContent.split(" "),K="",L=[],M=0;M<J.length;M++){var N=K+J[M]+" ",O=q.measureText(N),P=O.width;P>u&&M>0?(L.push(K),K=J[M]+" "):K=N}L.push(K);for(var Q=0;Q<L.length;Q++){var R=L[Q],S=v/L.length/2,T=(v-E-F)/L.length*(Q+1);T-=S,A=T-S,B=T+S,"transparent"!==G&&(q.shadowColor=G,q.shadowOffsetX=D,q.shadowOffsetY=E,q.shadowBlur=F),C=q.createLinearGradient(y,A,y,B),C.addColorStop(0,b),C.addColorStop(1,e),q.fillStyle=C,q.fillText(R,y,T)}m.className+=" sr-only",m.style.color="transparent"}}}},this.addResizeHandler()},gradiator=new Gradiator;